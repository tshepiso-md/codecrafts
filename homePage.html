<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crown and Beauty</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico">
   
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>Crown &amp; Polish Beauty Studio</h1>
                <nav>
                    <ul>
                        <li><a href="homePage.html">Home</a></li>
                        <li><a href="servicesPage.html">Services</a></li>
                        <li><a href="bookings.html">Bookings</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><span id="usernameDisplay">Guest</span></li>
                        <li><button id="loginBtn" class="login-button" >Login</button></li> <!-- place holder-->
                        <li><button id="logoutBtn" class="logout-button" onclick="logout()">Logout</button></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
   
    <section class="hero">
        <div class="container">
            <img src="nav-bar.jfif" width="450" height="250" style="float:right;" >
            <h2>Beauty and Spa Wellness</h2>
            <p>Awaken Your Glow: Let Our Experts Enhance Your Natural Beautyâ„¢</p>
            <button onclick="window.location.href='bookings.html'" class="appointment-button">Book an appointment</button>

            
        </div>
    </section>

    <section class="services">
        <div class="container">
            <div class="service">
                <img src="nail-icon.jfif" alt="Nail Care">
                <h3>Nail Care</h3>
                <p>Treat your hands and feet to the ultimate pampering experience with our range of manicure and pedicure services.</p>
                <a href="servicesPage.html" style="color: blue;">FIND OUT MORE</a>
            </div>
            <div class="service">
                <img src="hair-icon.jfif" alt="Facial Massage">
                <h3>Facial Massage</h3>
                <p>Experience pure bliss with our luxurious facial massage treatments.</p>
                <a href="servicesPage.html" style="color: blue;">FIND OUT MORE</a>
            </div>
            <div class="service">
                <img src="hairhair-icon.png" alt="Hair">
                <h3>Hair</h3>
                <p>Discover the perfect hairstyle to express your individuality and enhance your natural beauty.</p>
                <a href="servicesPage.html" style="color: blue;">FIND OUT MORE</a>
            </div>
            <div class="service">
                <img src="massage-icon.JFIF" alt="Full-body Massage">
                <h3>Full-body Massage</h3>
                <p>Treat yourself to the ultimate relaxation experience with our indulgent full body massage treatments.</p>
                <a href="servicesPage.html" style="color: blue;">FIND OUT MORE</a>
            </div>
        </div>
    </section>

    <section class="why-choose-us">
        <div class="container">
            <img src="about-picture.jfif" width="450" height="250" style="float:left;" >
            <h2>FEEL AMAIZING</h2>
            <p>Expertise and Experience: Our team comprises skilled professionals with years of experience in the beauty and wellness industry. We prioritize ongoing training and education to stay abreast of the latest techniques and trends, ensuring that you receive the highest level of service.</p>
            </div>

            <div class="content">
                <div class="contact-options">
                    <div class="contact-option call">Call</div>
                    <div class="contact-option email">Email</div>
                    <div class="contact-option book">Book in App</div>
                </div>
                <div class="info">
                    <div class="find-us">
                        <h3>FIND US</h3>
                        <p>BUSINESS HOURS:</p>
                        <p>Tuesday - Friday: 08:00 - 18:00</p>
                        <p>Saturday & Sunday: 09:00 - 16:00</p>
                        <p>Monday: Closed</p>
                        <address>
                            3 Waterford Pl, Kleve Hill Park, Sandton, 2191, South Africa
                        </address>
                        <p>BOOK NOW:</p>
                        <div class="links">
                            <p><a href="tel:+27113263429">+27 11 326 3429</a></p>
                            <p><a href="tel:+27837788989">+27 83 778 8989</a></p>
                            <p><a href="tel:+27837788980">+27 83 778 8980</a></p>
                            <p><a href="mailto:nikky.peter@me.com">crown&polish@gmail.com</a></p>
                        </div>
                    </div>
                    <div class="map">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1792.5020844012265!2d28.032498099729043!3d-26.033419622311264!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1e9573e421015675%3A0x2bd755e6db4ab929!2sBoutique%20Office%20Park!5e0!3m2!1sen!2sie!4v1716889685221!5m2!1sen!2sie" width="600" height="800" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe> </div>
                    <div class="get-social">
                        <h3>GET SOCIAL</h3>
                        <div class="links">
                            <p><a href="https://www.instagram.com/crownandpolishbeauty?igsh=N3BzbWJ1dmt4c2I1">Instagram</a></p>
                            <p><a href="https://www.tiktok.com/@sharonmotsepe0?_t=8qxMDaRQF4o&_r=1">TikTok</a></p>
                            <p><a href="https://www.facebook.com/share/xo6aZJG7rPPtPp2g/">Facebook</a></p>
                        </div>
                        <p>Crown and Polish Beauty Studio</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

 <!-- Popup HTML -->
<div id="popup" class="popup" style="display: none;">
    <div class="popup-content">
        <span class="close-btn">&times;</span>

        <iframe id="loginIframe" src="login.html" width="600px" height="750px" style="border:none;"></iframe>
        
    </div>
</div>

<!-- Second Popup -->
<div id="popup2" class="popup" style="display: none;">
    <div class="popup-content">
        <p>Sign-in successful!</p>
        <button id="okBtn">OK</button>
    </div>
</div>

    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://www.instagram.com/crownandpolishbeauty?igsh=N3BzbWJ1dmt4c2I1">Instagram</a>
                <a href="https://www.tiktok.com/@sharonmotsepe0?_t=8qxMDaRQF4o&_r=1">TikTok</a>
                <a href="https://www.facebook.com/share/xo6aZJG7rPPtPp2g/">Facebook</a>
            </div>
            <div class="footer-info">
                <ul>
                    <li><p>&copy; Crown and Beauty </p></li>
                    <li><p>designed and developed by codecrafts</p></li>
             </ul>
                <div class="footer-pages">
                    <h4>Pages</h4>
                    <ul>
                        <li><a href="homePage.html">Home</a></li>
                        <li><a href="servicesPage.html">Services</a></li>
                        <li><a href="bookings.html">Bookings</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-address">
                    <p>Address</p>
                    <p>3 Waterford Pl, Kleve Hill Park<br>Sandton, Johannesburg<br>Gauteng <br>South Africa </p>
                </div>
            </div>
        </div>
    </footer>
</body>

<script type="module" >


    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged} from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
    import { getFirestore, collection, setDoc, getDoc, deleteDoc, addDoc, doc} from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";
   
 
    const firebaseConfig = {
        apiKey: "AIzaSyC6OJmdKspro9Nb1FxwMH2PtN7WAJnKaUM",
        authDomain: "code-crafts-f5107.firebaseapp.com",
        projectId: "code-crafts-f5107",
        storageBucket: "code-crafts-f5107.appspot.com",
        messagingSenderId: "171510387289",
        appId: "1:171510387289:web:4234c82d229a80bb5d9748",
        measurementId: "G-Y9SCZHRVYZ"
      };
    
   
    const app = initializeApp(firebaseConfig);
    
   
    const auth = getAuth();
   
    const db = getFirestore(app); 
   


  // Show the sign-in popup
  document.getElementById('loginBtn').addEventListener('click', function() {
        document.getElementById('popup').style.display = 'block';
    });

    // Close the sign-in popup
    document.querySelector('.close-btn').addEventListener('click', function() {
        document.getElementById('popup').style.display = 'none';
    });

    
    window.addEventListener('message', function(event) {
        if (event.data === 'signInSuccess') {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('popup2').style.display = 'flex';
        }
    });

  
    document.getElementById('okBtn').addEventListener('click', function() {
        document.getElementById('popup').style.display = 'none';
        document.getElementById('popup2').style.display = 'none';
    });

  // ouside click close popup
    window.addEventListener('click', function(event) {
        const popup = document.getElementById('popup');
        const popup2 = document.getElementById('popup2');
        if (event.target === popup || event.target === popup2) {
            popup.style.display = 'none';
            popup2.style.display = 'none';
        }
    });

    
// Observe user state changes
onAuthStateChanged(auth, (user) => {
    if (user) {
        // User is signed in
        const userDocRef = doc(db, 'users', user.uid);
        getDoc(userDocRef)
            .then(docSnapshot => {
                if (docSnapshot.exists()) {
                    const FirstName = docSnapshot.data().FirstName;
                    document.getElementById('usernameDisplay').textContent = FirstName;
                }
            })
            .catch(error => {
                console.error("Error fetching user data: ", error);
            });

        document.getElementById('loginBtn').style.display = 'none';    // Hide login button
        document.getElementById('logoutBtn').style.display = 'inline-block'; // Show logout button
    } else {
        // User is signed out
        document.getElementById('usernameDisplay').textContent = 'Guest';
        document.getElementById('loginBtn').style.display = 'inline-block';  // Show login button
        document.getElementById('logoutBtn').style.display = 'none';         // Hide logout button
    }
});


function logout() {
    signOut(auth).catch((error) => {
        console.error('Error during logout:', error);
        alert('Failed to log out. Please try again.');
    });
}

// Make logout globally accessible
window.logout = logout;

function displayUsername() { 
        onAuthStateChanged(auth, user => {
            if (user) {
              
                const userDocRef = doc(db, 'users', user.uid); 
                getDoc(userDocRef)
                    .then(docSnapshot => {
                        if (docSnapshot.exists()) {
                            const FirstName = docSnapshot.data().FirstName;
                            document.getElementById('usernameDisplay').textContent = FirstName;
                        } else {
                            document.getElementById('usernameDisplay').textContent = 'User not found';
                        }
                    })
                    .catch(error => {
                        console.error("Error fetching user data: ", error);
                        document.getElementById('usernameDisplay').textContent = 'Error loading username';
                    });
            } else {
              
                document.getElementById('usernameDisplay').textContent = 'Guest';
            }
        });
    }

    
    displayUsername();

</script>
</html>
